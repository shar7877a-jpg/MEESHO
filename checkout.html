<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meesho Cart - Step 1</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
            margin: 0;
            background: #f7f7f7;
            max-width: 480px;
            margin: auto;
            color: #222;
        }

        .page {
            min-height: 100vh;
            padding-bottom: 90px;
            /* space for bottom bar */
            background: #fff;
        }

        /* HEADER */
        .header {
            display: flex;
            align-items: center;
            padding: 10px 14px;
            border-bottom: 1px solid #ececec;
            background: #fff;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .back-arrow {
            font-size: 22px;
            margin-right: 10px;
            cursor: pointer;
        }

        .header-title {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* STEP INDICATOR */
        .steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 20px 4px;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
            font-size: 11px;
            color: #9c9c9c;
        }

        .step-number {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid #c3c3d4;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 4px;
            font-size: 12px;
            background: #fff;
        }

        .step.active .step-number {
            border-color: #3275ff;
            color: #3275ff;
        }

        .step.active .step-label {
            color: #222;
            font-weight: 600;
        }

        .step-line {
            position: absolute;
            top: 12px;
            left: 50%;
            right: -50%;
            height: 2px;
            background: #e2e2ee;
            z-index: -1;
        }

        .step:last-child .step-line {
            display: none;
        }

        /* CART ITEM */
        .cart-section {
            margin-top: 6px;
            border-top: 8px solid #f5f5f9;
            padding: 12px 12px 0;
        }

        .cart-item {
            display: flex;
            gap: 10px;
            padding: 10px 0;
        }

        .cart-image {
            width: 88px;
            height: 110px;
            border-radius: 6px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .cart-image img {
            width: 80%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .cart-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .cart-title-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 4px;
        }

        .cart-title {
            font-size: 15px;
            font-weight: 600;
            color: #222;
        }

        .trash-btn {
            font-size: 18px;
            cursor: pointer;
            color: #999;
        }

        .price-row {
            display: flex;
            align-items: baseline;
            gap: 6px;
            margin-top: 4px;
            font-size: 14px;
        }

        .price-now {
            font-size: 16px;
            font-weight: 700;
        }

        .price-old {
            text-decoration: line-through;
            color: #9e9e9e;
            font-size: 13px;
        }

        .size-text {
            font-size: 13px;
            margin-top: 4px;
            color: #444;
        }

        .qty-row {
            display: flex;
            justify-content: flex-end;
            margin-top: 8px;
        }

        .qty-control-wrapper {
            background: #f5f6fb;
            border-radius: 24px;
            padding: 4px;
            display: inline-flex;
            align-items: center;
        }

        .qty-btn {
            width: 30px;
            height: 30px;
            border-radius: 999px;
            border: none;
            background: transparent;
            font-size: 18px;
            cursor: pointer;
        }

        .qty-value {
            min-width: 34px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
        }

        /* SHIPPING / TOTALS */
        .summary-section {
            border-top: 8px solid #f5f5f9;
            margin-top: 4px;
            padding: 12px;
            font-size: 14px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .summary-label {
            color: #555;
        }

        .summary-value {
            font-weight: 600;
        }

        .summary-divider {
            border-top: 1px solid #eeeeee;
            margin: 10px 0;
        }

        .order-total-label {
            font-size: 16px;
            font-weight: 600;
        }

        .order-total-value {
            font-size: 16px;
            font-weight: 700;
        }

        /* SAFETY CARD */

        .safe-card img {
            width: 100%;
        }



        /* BOTTOM BAR */
        .bottom-bar {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            background: #fff;
            border-top: 1px solid #e5e5e5;
            padding: 8px 12px 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 480px;
            margin: auto;
        }

        .bottom-left {
            flex: 1;
        }

        .bottom-amount {
            font-size: 16px;
            font-weight: 700;
        }

        .bottom-link {
            font-size: 11px;
            color: #a70073;
            margin-top: 2px;
        }

        .continue-btn {
            flex: 1;
            background: #a70073;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 12px 0;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }

        /* EMPTY CART */
        .empty-cart {
            padding: 40px 16px;
            text-align: center;
            color: #999;
            font-size: 14px;
        }
    </style>
</head>

<body>

    <div class="page">

        <!-- HEADER -->
        <div class="header">
            <div class="back-arrow" onclick="goBack()">&#8249;</div>
            <div class="header-title">CART</div>
        </div>

        <!-- STEP INDICATOR -->
        <div class="steps">
            <div class="step active">
                <div class="step-number">1</div>
                <div class="step-label">Cart</div>
                <div class="step-line"></div>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-label">Address</div>
                <div class="step-line"></div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-label">Payment</div>
                <div class="step-line"></div>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-label">Summary</div>
            </div>
        </div>

        <!-- CART PRODUCTS -->
        <div class="cart-section" id="cartSection">
            <!-- JS will inject cart items here -->
        </div>

        <!-- SHIPPING / TOTALS -->
        <div class="summary-section" id="summarySection" style="display:none;">
            <div class="summary-row">
                <span class="summary-label">Shipping:</span>
                <span class="summary-value">FREE</span>
            </div>
            <div class="summary-row">
                <span class="summary-label">Total Product Price:</span>
                <span class="summary-value">₹<span id="productsTotal">0</span></span>
            </div>
            <div class="summary-divider"></div>
            <div class="summary-row">
                <span class="order-total-label">Order Total :</span>
                <span class="order-total-value">₹<span id="orderTotal">0</span></span>
            </div>
        </div>

        <!-- SAFETY CARD -->
        <div class="safe-card">

            <img src="./img/your-safety-img.jpg" alt="">

        </div>

    </div> <!-- page -->

    <!-- BOTTOM BAR -->
    <div class="bottom-bar" id="bottomBar" style="display:none;">
        <div class="bottom-left">
            <div class="bottom-amount">₹<span id="bottomTotal">0</span></div>
            <div class="bottom-link">VIEW PRICE DETAILS</div>
        </div>
        <button class="continue-btn" onclick="onContinue()">Continue</button>
    </div>

    <script>
        const CART_KEY = 'wd_cart_v1';
        let cart = [];

        function goBack() {
            // Back to product page
            window.history.back();
        }

        function loadCart() {
            try {
                const stored = localStorage.getItem(CART_KEY);
                cart = stored ? JSON.parse(stored) : [];
                if (!Array.isArray(cart)) cart = [];
            } catch (e) {
                cart = [];
            }
        }

        function saveCart() {
            localStorage.setItem(CART_KEY, JSON.stringify(cart));
        }

        function formatQty(q) {
            return String(q).padStart(2, '0');
        }

        function renderCartPage() {
            const cartSection = document.getElementById('cartSection');
            const summarySection = document.getElementById('summarySection');
            const bottomBar = document.getElementById('bottomBar');
            cartSection.innerHTML = '';

            if (cart.length === 0) {
                cartSection.innerHTML =
                    '<div class="empty-cart">Your cart is empty. Go back and add items.</div>';
                summarySection.style.display = 'none';
                bottomBar.style.display = 'none';
                return;
            }

            summarySection.style.display = 'block';
            bottomBar.style.display = 'flex';

            cart.forEach((item, index) => {
                const row = document.createElement('div');
                row.className = 'cart-item';

                const oldPrice = (item.price + 800); // just like your previous page

                row.innerHTML = `
        <div class="cart-image">
          <img src="${item.img}" alt="${item.title}">
        </div>
        <div class="cart-info">
          <div class="cart-title-row">
            <div class="cart-title">${item.title}</div>
            <div class="trash-btn" onclick="removeItem(${index})">&#128465;</div>
          </div>
          <div class="price-row">
            <span class="price-now">₹${item.price}</span>
            <span class="price-old">₹${oldPrice}</span>
          </div>
          <div class="size-text">Size : ${item.size}</div>
          <div class="qty-row">
            <div class="qty-control-wrapper">
              <button class="qty-btn" onclick="changeQty(${index}, -1)">−</button>
              <div class="qty-value" id="qty-${index}">${formatQty(item.qty)}</div>
              <button class="qty-btn" onclick="changeQty(${index}, 1)">+</button>
            </div>
          </div>
        </div>
      `;

                cartSection.appendChild(row);
            });

            updateTotals();
        }

        function updateTotals() {
            let total = 0;
            cart.forEach(item => {
                total += item.price * item.qty;
            });

            document.getElementById('productsTotal').textContent = total.toFixed(2);
            document.getElementById('orderTotal').textContent = total.toFixed(2);
            document.getElementById('bottomTotal').textContent = total.toFixed(2);
        }

        function changeQty(index, delta) {
            if (!cart[index]) return;
            cart[index].qty += delta;
            if (cart[index].qty < 1) cart[index].qty = 1;
            document.getElementById('qty-' + index).textContent = formatQty(cart[index].qty);
            saveCart();
            updateTotals();
        }

        function removeItem(index) {
            if (!cart[index]) return;
            cart.splice(index, 1);
            saveCart();
            renderCartPage();
        }

        function onContinue() {
            window.location.href = "address.html";

        }

        // INIT
        document.addEventListener('DOMContentLoaded', () => {
            loadCart();
            renderCartPage();
        });
    </script>

</body>

</html>